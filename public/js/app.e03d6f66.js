(function(e){function t(t){for(var r,o,i=t[0],u=t[1],l=t[2],d=0,p=[];d<i.length;d++)o=i[d],n[o]&&p.push(n[o][0]),n[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);c&&c(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],r=!0,i=1;i<s.length;i++){var u=s[i];0!==n[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=s[0]))}return e}var r={},n={app:0},a=[];function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=r,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(s,r,function(t){return e[t]}.bind(null,r));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=u;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var r=s("c21b"),n=s.n(r);n.a},"05b0":function(e,t,s){},"0b75":function(e,t,s){"use strict";var r=s("fe2f"),n=s.n(r);n.a},1:function(e,t){},2:function(e,t){},"2b56":function(e,t,s){"use strict";var r=s("3ec9"),n=s.n(r);n.a},3:function(e,t){},"3ec9":function(e,t,s){},4:function(e,t){},"4efb":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("097d");var r=s("2b0e"),n=s("9f7b"),a=(s("2dd8"),s("5fd6"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("navbar-main",{attrs:{currentUser:e.currentUser}}),s("router-view",{staticClass:"container pt-4"})],1)}),o=[],i=new r["a"]({}),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-navbar",{staticClass:"rw-navbar",attrs:{toggleable:"md",type:"dark"}},[s("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),s("b-navbar-brand",[s("router-link",{attrs:{id:"nav-brand",to:"/"}},[e._v("Auth From Scratch")])],1),s("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[s("b-navbar-nav",{staticClass:"ml-auto"},[s("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:!e.currentUser.signedIn,expression:"!currentUser.signedIn"}]},[s("router-link",{attrs:{id:"nav-signup",to:"/signup"}},[e._v("Sign Up")])],1),s("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:!e.currentUser.signedIn,expression:"!currentUser.signedIn"}]},[s("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1),s("navbar-user-control",{directives:[{name:"show",rawName:"v-show",value:e.currentUser.signedIn,expression:"currentUser.signedIn"}],attrs:{currentUser:e.currentUser}})],1)],1)],1)},l=[],c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-nav-item-dropdown",{attrs:{text:e.currentUser.username,right:""}},[s("b-dropdown-item",{staticClass:"user-control-item"},[s("router-link",{attrs:{to:"/dashboard"}},[e._v("Dashboard")])],1),s("b-dropdown-item",{staticClass:"user-control-item"},[e._v("\n    Notes: "+e._s(e.currentUser.numberOfNotes)+"\n  ")]),s("b-dropdown-item",[s("span",{on:{click:e.triggerLogout}},[e._v("Logout")])])],1)},d=[],p={props:["currentUser"],methods:{triggerLogout:function(){i.$emit("triggerLogout")}}},h=p,f=(s("cee9"),s("2877")),m=Object(f["a"])(h,c,d,!1,null,null,null);m.options.__file="NavBarUserControl.vue";var v=m.exports,g={components:{"navbar-user-control":v},props:["currentUser"],methods:{},created:function(){}},b=g,w=(s("dd43"),Object(f["a"])(b,u,l,!1,null,null,null));w.options.__file="NavBar.vue";var _=w.exports,y={data:function(){return{currentUser:{signedIn:!1,_id:"",username:"",numberOfNotes:0},currentDevice:{width:0}}},components:{"navbar-main":_},computed:{},methods:{checkIfLoggedIn:function(){if(localStorage.token){this.currentUser.signedIn=!0;var e=JSON.parse(localStorage.getItem("afs-userdata"));this.currentUser.username=e.username,this.$router.push("/dashboard")}else this.currentUser.signedIn=!1}},created:function(){this.checkIfLoggedIn()},mounted:function(){var e=this;i.$on("isSignedIn",function(t){e.currentUser.signedIn=!0,e.currentUser.username=t}),i.$on("loadNoteCount",function(t){e.currentUser.numberOfNotes=t}),i.$on("isSignedOut",function(){e.currentUser.signedIn=!1,e.currentUser.username=""})}},N=y,x=(s("034f"),Object(f["a"])(N,a,o,!1,null,null,null));x.options.__file="App.vue";var k=x.exports,M=s("8c4f"),S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("b-jumbotron",{staticClass:"pb-4"},[s("template",{slot:"header"},[e._v("\n      Auth From Scratch\n    ")]),s("template",{slot:"lead"},[e._v("\n      An excellent guide to Authentication and Authorization for beginners!\n    ")]),s("hr",{staticClass:"my-4"}),s("p",[e._v("\n      Presented by Coding Garden\n    ")]),s("router-link",{staticClass:"btn btn-success mt-4 mr-3",attrs:{to:{name:"signup"}}},[e._v("Sign Up")]),s("router-link",{staticClass:"btn btn-outline-info mt-4",attrs:{to:{name:"signup"}}},[e._v("Learn More")])],2)],1)},$=[],U={name:"home"},q=U,E=(s("cccb"),Object(f["a"])(q,S,$,!1,null,null,null));E.options.__file="Home.vue";var O=E.exports,j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("b-card",[s("h1",[e._v("Sign Up")]),s("b-alert",{class:{"alert-msg-danger":this.alertMessage.isError,"alert-msg-success":!this.alertMessage.isError},attrs:{show:this.alertMessage.visible}},[e._v("\n        "+e._s(e.alertMessage.value)+"\n    ")]),s("b-form",{on:{submit:function(t){return t.preventDefault(),e.signup(t)}}},[s("b-form-group",{attrs:{id:"username-group",label:"Username:","label-for":"username-input",description:"Please claim a unique username"}},[s("b-form-input",{attrs:{id:"username-input",type:"text",placeholder:"Enter a Username",required:""},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}}),s("span",{staticClass:"a11y-helper"},[e._v("Enter a username that is longer than 6 characters, and must contain only alpha-numerics and underscores.")])],1),s("b-form-group",{attrs:{id:"password-group",label:"Password:","label-for":"password-input",description:"Please choose a password that is at least 6 characters"}},[s("b-form-input",{attrs:{id:"password-input",type:"password",placeholder:"Make sure it's a strong one!",required:""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),s("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.user.password.length>5,expression:"user.password.length > 5"}],attrs:{id:"password-verify-group",label:"Verify Password:","label-for":"password-verify-input",description:"Please verify your password"}},[s("b-form-input",{attrs:{id:"password-verify-input",type:"password",placeholder:"Verify that you typed the right thing!"},model:{value:e.user.passwordVerify,callback:function(t){e.$set(e.user,"passwordVerify",t)},expression:"user.passwordVerify"}})],1),s("div",{staticClass:"signup-group"},[s("b-button",{attrs:{type:"submit",variant:"success"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:!e.isRequesting,expression:"!isRequesting"}]},[e._v("Sign Me Up!")]),s("rotate-loader",{directives:[{name:"show",rawName:"v-show",value:e.isRequesting,expression:"isRequesting"}]})],1)],1)],1)],1)],1)},C=[],A=(s("6762"),s("2fdb"),s("ac6a"),s("f0b1")),I=s.n(A),R=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},P=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"lds-ellipsis"},[s("div"),s("div"),s("div"),s("div")])}],T={},L=T,z=(s("0b75"),Object(f["a"])(L,R,P,!1,null,null,null));z.options.__file="RotateLoader.vue";var F=z.exports,J="http://192.168.5.135:7777/auth/signup",V=I.a.object().keys({username:I.a.string().regex(/(^[a-zA-Z0-9!#$%^&*_-]+$)/).min(3).max(20).required(),password:I.a.string().trim().min(6).required(),passwordVerify:I.a.string().trim().min(6).required()}),D={data:function(){return{alertMessage:{visible:!1,isError:!1,value:""},user:{username:"",password:"",passwordVerify:""},isRequesting:!1}},components:{"rotate-loader":F},watch:{user:{handler:function(){this.alertMessage.visible=!1,this.alertMessage.value=""},deep:!0}},methods:{signup:function(){var e=this;if(this.isRequesting=!0,this.validateUser()){var t={username:this.user.username,password:this.user.password};this.showAlert(!1,"Awesome! Your entries seem to be excellent! Checking avaiability..."),fetch(J,{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then(function(t){return t.ok?t.json():t.json().then(function(t){throw e.isRequesting=!1,new Error(t.message)})}).then(function(t){localStorage.token=t.token,setTimeout(function(){e.isRequesting=!1,i.$emit("isSignedIn",user.username),e.$router.push("/dashboard")},1e3)}).catch(function(t){console.log(t),e.showAlert(!0,t.message),e.isRequesting=!1})}},validateUser:function(){if(this.user.password!==this.user.passwordVerify)return this.isRequesting=!1,this.showAlert(!0,"The passwords you've entered don't seem to match. Please try again..."),!1;var e=I.a.validate(this.user,V);return null===e.error||(e.error.message.includes("username")?(this.isRequesting=!1,void this.showAlert(!0,"The username you claimed is not accepted. Requires a-z, A-Z, 0-9, !#$%^&*_-")):(this.isRequesting=!1,this.showAlert(!0,"The password you've invoked will not work. Requires a-z, A-Z, 0-9, !#$%^&*_-"),!1))},showAlert:function(e,t){this.alertMessage.visible=!0,this.alertMessage.isError=e,this.alertMessage.value=t;var s=this;setTimeout(function(){s.alertMessage.visible=!1,s.alertMessage.isError=!1,s.alertMessage.value=""},3e3)}}},B=D,Z=(s("e42b"),Object(f["a"])(B,j,C,!1,null,null,null));Z.options.__file="Signup.vue";var H=Z.exports,W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",[s("b-card",[s("h1",[e._v(e._s(e.welcomeMessage))]),s("b-alert",{class:{"alert-msg-danger":this.alertMessage.isError,"alert-msg-success":!this.alertMessage.isError},attrs:{show:this.alertMessage.visible}},[e._v("\n          "+e._s(e.alertMessage.value)+"\n      ")]),s("b-form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[s("b-form-group",{attrs:{id:"username-group",label:"Username:","label-for":"username-input",description:"please enter your username"}},[s("b-form-input",{attrs:{id:"username-input",type:"text",required:""},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),s("b-form-group",{attrs:{id:"password-group",label:"Password:","label-for":"password-input",description:"please enter your password"}},[s("b-form-input",{attrs:{id:"password-input",type:"password",required:""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),s("div",{staticClass:"submit-group"},[s("b-button",{attrs:{type:"submit",variant:"primary"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:!e.isRequesting,expression:"!isRequesting"}]},[e._v("Login")]),s("rotate-loader",{directives:[{name:"show",rawName:"v-show",value:e.isRequesting,expression:"isRequesting"}]})],1),s("router-link",{attrs:{to:"/signup"}},[s("b-button",{staticClass:"ml-3",attrs:{variant:"outline-success"}},[e._v("\n\t\t\t\t\t\t\tSign Up\n\t\t\t\t\t\t")])],1)],1)],1)],1)],1)},G=[],Y=I.a.object().keys({username:I.a.string().regex(/(^[a-zA-Z0-9!#$%^&*_-]+$)/).min(3).max(20).required(),password:I.a.string().trim().min(6).required()}),X="http://192.168.5.135:7777/auth/login",K={name:"login",data:function(){return{welcomeMessage:"Welcome!",user:{username:"",password:""},isRequesting:!1,alertMessage:{visible:!1,isError:!1,value:""}}},components:{"rotate-loader":F},methods:{login:function(){var e=this;this.isRequesting=!0;var t={username:this.user.username,password:this.user.password};this.validUser()&&fetch(X,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.ok?e.json():e.json().then(function(e){throw new Error(e.message)})}).then(function(t){console.log(t),localStorage.token=t.token,localStorage.setItem("afs-userdata",JSON.stringify(t.userData)),setTimeout(function(){e.isRequesting=!1,i.$emit("isSignedIn",e.user.username),e.$router.push("/dashboard")},1e3)}).catch(function(t){console.log(t),e.showAlert(!0,t.message),e.isRequesting=!1})},validUser:function(){var e=I.a.validate(this.user,Y);if(null===e.error)return!0;e.error.message.includes("username")?this.showAlert(!0,"Username is outside the spec."):this.showAlert(!0,"Password is outside the spec."),this.isRequesting=!1},showAlert:function(e,t){this.alertMessage.visible=!0,this.alertMessage.isError=e,this.alertMessage.value=t;var s=this;setTimeout(function(){s.alertMessage.visible=!1,s.alertMessage.isError=!1,s.alertMessage.value=""},3e3)}}},Q=K,ee=(s("d6db"),Object(f["a"])(Q,W,G,!1,null,null,null));ee.options.__file="Login.vue";var te=ee.exports,se=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",{staticClass:"display-4"},[e._v("Notes")]),s("p",[e._v("Welcome "+e._s(e.user.username)+"! Lets take some notes.")]),s("transition",{attrs:{name:"fade"}},[s("b-alert",{class:{"alert-msg-danger":this.alertMessage.isError,"alert-msg-success":!this.alertMessage.isError},attrs:{show:this.alertMessage.visible}},[e._v("\n        "+e._s(e.alertMessage.value)+"\n    ")])],1),s("hr"),s("h4",{staticClass:"pointer",on:{click:function(t){e.showForm=!e.showForm}}},[e._v("New Note\n  ")]),s("transition",{attrs:{name:"fade"}},[s("b-form",{directives:[{name:"show",rawName:"v-show",value:e.showForm,expression:"showForm"}],staticClass:"add-note-form",on:{submit:function(t){t.preventDefault(),e.addNote()}}},[s("b-form-group",{attrs:{id:"notes--title-group",label:"Title","label-for":"notes--title-input"}},[s("b-form-input",{attrs:{id:"notes--title-input",type:"text","aria-describedby":"titleHelp","aria-required":"true",placeholder:"New Note Title",required:""},model:{value:e.newNote.title,callback:function(t){e.$set(e.newNote,"title",t)},expression:"newNote.title"}}),s("small",{staticClass:"text-muted",attrs:{id:"titleHelp"}},[e._v("Please enter the title of your note")])],1),s("b-form-textarea",{attrs:{id:"notes--body-input",placeholder:"Write out your note here",rows:3,"max-rows":8,required:""},model:{value:e.newNote.body,callback:function(t){e.$set(e.newNote,"body",t)},expression:"newNote.body"}}),s("b-button",{staticClass:"mt-3",attrs:{type:"submit",variant:"success"}},[e._v("Add Note\n      ")])],1)],1),s("hr"),s("dash--noteboard",{attrs:{notes:e.notes}}),s("hr")],1)},re=[],ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid-wrap mb-3"},e._l(e.notes,function(e,t){return s("div",{key:t,staticClass:"note-wrapper"},[s("dash--note",{attrs:{note:e,notesArrIndex:t}})],1)}))},ae=[],oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"fade"}},[s("b-card",{directives:[{name:"show",rawName:"v-show",value:e.note,expression:"note"}],staticClass:"note--card",attrs:{"bg-variant":"dark","border-variant":"success",header:e.note.title}},[s("div",{staticClass:"delete-icon pointer",on:{click:function(t){e.Note_deleteNote(e.note._id,e.notesArrIndex)}}},[e._v("X\n    ")]),s("p",{staticClass:"card-text note--body"},[e._v(e._s(e.note.body)+"\n    ")])])],1)},ie=[],ue={props:["note","notesArrIndex"],methods:{Note_deleteNote:function(e,t){i.$emit("deleteNote_trigger",{id:e,notesArrIndex:t})}}},le=ue,ce=(s("9581"),Object(f["a"])(le,oe,ie,!1,null,"5448b107",null));ce.options.__file="Note.vue";var de=ce.exports,pe={props:["notes"],components:{"dash--note":de}},he=pe,fe=(s("58a8"),Object(f["a"])(he,ne,ae,!1,null,null,null));fe.options.__file="Noteboard.vue";var me=fe.exports,ve="http://192.168.5.135:7777",ge={data:function(){return{user:{_id:"",username:""},notes:[],newNote:{title:"",body:""},alertMessage:{visible:!1,isError:!1,value:""},showForm:!1}},components:{"dash--noteboard":me},created:function(){var e=this;i.$on("triggerLogout",function(){e.logout()}),i.$on("deleteNote_trigger",function(t){console.log(t),e.notes.splice(t.notesArrIndex,1),e.deleteNote(t.id)})},mounted:function(){var e=this;fetch(ve,{headers:{authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(t){t.user?(e.user=t.user,console.log(e.user),e.getNotes()):e.logout()})},methods:{getNotes:function(){var e=this;fetch("api/v1/notes",{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(t){e.notes=t,i.$emit("loadNoteCount",e.notes.length),console.log(e.notes)})},addNote:function(){fetch("api/v1/notes",{method:"POST",body:JSON.stringify(this.newNote),headers:{"content-type":"application/json",authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(e){return console.log(e)}),this.showForm=!1,this.showAlert(!1,"Your note has been successfully added."),this.newNote.title="",this.newNote.body="",this.getNotes()},deleteNote:function(e){var t=JSON.stringify({_id:e});fetch("api/v1/notes/rm/",{method:"POST",body:t,headers:{"content-type":"application/json",authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(e){return console.log(e)})},logout:function(){localStorage.removeItem("token"),localStorage.removeItem("afs-userdata"),i.$emit("isSignedOut"),this.$router.push("/login")},showAlert:function(e,t){this.alertMessage.visible=!0,this.alertMessage.isError=e,this.alertMessage.value=t;var s=this;setTimeout(function(){s.alertMessage.visible=!1,s.alertMessage.isError=!1,s.alertMessage.value=""},3e3)}}},be=ge,we=(s("2b56"),Object(f["a"])(be,se,re,!1,null,null,null));we.options.__file="Dashboard.vue";var _e=we.exports;function ye(e,t,s){localStorage.token?s("/dashboard"):s()}r["a"].use(M["a"]);var Ne=new M["a"]({routes:[{path:"/",name:"home",component:O},{path:"/signup",name:"signup",component:H,beforeEnter:ye},{path:"/login",name:"login",component:te,beforeEnter:ye},{path:"/dashboard",name:"dashboard",component:_e,beforeEnter:function(e,t,s){localStorage.token?s():s("/login")}}]});r["a"].use(n["a"]),r["a"].config.productionTip=!1,new r["a"]({router:Ne,render:function(e){return e(k)}}).$mount("#app")},"58a8":function(e,t,s){"use strict";var r=s("66a7"),n=s.n(r);n.a},"5a49":function(e,t,s){},"5fd6":function(e,t,s){},"66a7":function(e,t,s){},"8f59":function(e,t,s){},9581:function(e,t,s){"use strict";var r=s("4efb"),n=s.n(r);n.a},ad19:function(e,t,s){},c21b:function(e,t,s){},cccb:function(e,t,s){"use strict";var r=s("8f59"),n=s.n(r);n.a},cee9:function(e,t,s){"use strict";var r=s("ad19"),n=s.n(r);n.a},d6db:function(e,t,s){"use strict";var r=s("05b0"),n=s.n(r);n.a},dd43:function(e,t,s){"use strict";var r=s("5a49"),n=s.n(r);n.a},e42b:function(e,t,s){"use strict";var r=s("edc2"),n=s.n(r);n.a},edc2:function(e,t,s){},fe2f:function(e,t,s){}});
//# sourceMappingURL=app.e03d6f66.js.map